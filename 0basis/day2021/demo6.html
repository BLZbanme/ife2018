<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">    
    <title>IFE ECMAScript</title>
    <style>
    </style>
</head>
<body>            
    <div id="fade-obj" style="width:300px;height:300px;background:#000"></div>
    <button id="fade-btn">淡出</button>
    <script>
        var tmp = 1;
        function danchu(){
            document.querySelector('#fade-obj').style.opacity = tmp - 0.1;
            tmp = tmp -  0.1;
        }

        function outBtn(){
            document.querySelector('#fade-btn').innerHTML = '淡入';
            document.querySelector('#fade-btn').disabled = false;
        }

        function danru(){
            document.querySelector('#fade-obj').style.opacity = tmp + 0.1;
            tmp = tmp + 0.1;
        }

        function inBtn(){
            document.querySelector('#fade-btn').innerHTML = '淡出';
            document.querySelector('#fade-btn').disabled = false;
        }
        document.querySelector('#fade-btn').onclick = function(e){
            if(e.target.innerHTML == '淡出'){
                var i = 1;
                while(i >= 0){
                    setTimeout(danchu, 1000 * (1 - i));
                    i -= 0.1;
                }
                document.querySelector('#fade-btn').disabled = true;
                setTimeout(outBtn, 1000);
            }else{
                var i = 1;
                while(i >= 0){
                    setTimeout(danru , 1000 * (1 - i));
                    i -= 0.1;
                }
                document.querySelector('#fade-btn').disabled = true;
                setTimeout(inBtn, 1000);
            }
            
        }

    </script>
</body>
</html>